{"version":3,"sources":["ResourceLoader.js"],"names":[],"mappings":"AAAA;AACA,SAAQ,QAAR,QAAuB,gBAAvB;AACA,OAAO,MAAM,cAAN,CAAoB;AACvB,kBAAa;AACT,aAAK,GAAL,GAAS,IAAI,GAAJ,CAAQ,QAAR,CAAT;AACA,aAAI,IAAI,CAAC,GAAD,EAAK,KAAL,CAAR,IAAuB,KAAK,GAA5B,EAAgC;AAC5B,gBAAI,QAAQ,GAAG,WAAH,EAAZ;AACA,kBAAM,GAAN,GAAU,KAAV;AACA,iBAAK,GAAL,CAAS,GAAT,CAAa,GAAb,EAAiB,KAAjB;AACH;AACJ;AACD,WAAO,QAAP,EAAgB;AACZ,YAAI,cAAY,CAAhB;AACA,aAAI,IAAI,KAAR,IAAiB,KAAK,GAAL,CAAS,MAAT,EAAjB,EAAmC;AAC/B,kBAAM,MAAN,GAAa,MAAI;AACb;;AACA;AACA,oBAAG,eAAa,KAAK,GAAL,CAAS,IAAzB,EAA8B;AAC1B,6BAAS,KAAK,GAAd;AACH;AACJ,aAND;AAOH;AACJ;AACD,WAAO,MAAP,GAAe;AACX;;AACA,eAAO,IAAI,cAAJ,EAAP;AACH;AAxBsB","file":"ResourceLoader-compiled.js","sourcesContent":["//资源文件加载器，确保canvas在图片资源加载完成后才进行渲染\r\nimport {Resource} from \"./Resources.js\"\r\nexport class ResourceLoader{\r\n    constructor(){\r\n        this.map=new Map(Resource);\r\n        for(let [key,value] of this.map){\r\n            var image = wx.createImage();\r\n            image.src=value;\r\n            this.map.set(key,image);\r\n        }\r\n    }\r\n    onLoad(callback){\r\n        let loadedCount=0;\r\n        for(let value of this.map.values()){\r\n            value.onload=()=>{\r\n                \"use strict\";\r\n                loadedCount++;\r\n                if(loadedCount>=this.map.size){\r\n                    callback(this.map);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    static create(){\r\n        \"use strict\";\r\n        return new ResourceLoader()\r\n    }\r\n}"]}